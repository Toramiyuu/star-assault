---
phase: 01.1-hud-layout-rethink
plan: 02
subsystem: ui
tags: [phaser3, hud, layout, graphics, ux]

# Dependency graph
requires:
  - phase: 01.1-hud-layout-rethink
    plan: 01
    provides: HUD.js with named constants — BAR_W/BAR_H/SHIELD_Y/HEALTH_Y/XP_BAR_Y/BOSS_BAR_Y all tunable
provides:
  - Human-verified HUD layout: bars 320x18px at Y=80/106, XP bar at Y=1872, boss bar at Y=140
  - Top hudBg reduced to 130px height (was 270), alpha 0.55 — gameplay visible through it
  - Bottom xpBotGrad reduced to 28px height (XP_BAR_H+8 padding), alpha 0.40 — thin strip not a panel
  - Phase 01.1 complete: all four ROADMAP success criteria met with user sign-off after fix iteration
affects: [02-ground-drop-icons, any phase touching HUD.js]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "HUD background strips should be thin and semi-transparent — gameplay must remain readable through them"
    - "Bars sized for readability not prominence: 320x18px is the validated sweet spot at 375px CSS viewport"

key-files:
  created:
    - .planning/phases/01.1-hud-layout-rethink/01.1-02-SUMMARY.md
  modified:
    - src/systems/HUD.js

key-decisions:
  - "BAR_W reduced from 560 to 320: 560px bars covered too much of the top play area; 320 is still clearly readable at 375px viewport without dominating the screen"
  - "SHIELD_Y 160->80, HEALTH_Y 200->106: push bars close to top edge so only a thin strip of HUD background is needed"
  - "BOSS_BAR_Y 260->140: with smaller bars the boss bar can sit much closer, clearing overlap"
  - "hudBg height 270->130px: slim strip covering only the bar cluster, not a large dark panel covering action"
  - "xpBotGrad height reduced to 28px (XP_BAR_H+8 padding): goal is a thin visible strip at screen bottom, not a panel covering gameplay"
  - "XP_BAR_Y 1760->1872: push XP bar all the way to the bottom screen edge"

patterns-established:
  - "HUD backgrounds must be proportional to their content — verify at 375px CSS viewport that gameplay remains unobscured"

requirements-completed: [VISC-03]

# Metrics
duration: 15min
completed: 2026-02-27
---

# Phase 1.1 Plan 02: HUD Layout Rethink — Visual Verification Summary

**HUD footprint reduced after user review: bars slimmed to 320x18px at Y=80/106, backgrounds thinned to 130px/28px strips, XP bar pushed to screen bottom edge — all four ROADMAP readability criteria met**

## Performance

- **Duration:** ~15 min (includes user visual review cycle and fix iteration)
- **Started:** 2026-02-27T00:15:00Z
- **Completed:** 2026-02-27T00:30:00Z
- **Tasks:** 1 (fix + verification)
- **Files modified:** 1

## Accomplishments

- Identified and fixed three HUD footprint problems found during user visual review at 375px viewport:
  1. XP bar background (`xpBotGrad`) was an opaque black panel covering gameplay — replaced with 28px thin strip (alpha 0.40)
  2. Shield/HP bars at 560x30px were too large — reduced to 320x18px, repositioned to Y=80/106 (closer to top edge)
  3. Boss bar at Y=260 overlapped the enlarged HUD cluster — moved to Y=140 (26px gap below health bar at Y=106+9)
- Top HUD background (`hudBg`) slimmed from 270px height to 130px, matching the smaller bar cluster
- XP_BAR_Y pushed from Y=1760 to Y=1872 — bar sits at the very bottom screen edge
- Phase 01.1 complete: user confirmed all four ROADMAP Phase 1.1 success criteria met after the fix commit

## Task Commits

1. **Task 1: Fix HUD footprint — bars smaller, backgrounds thinner, boss bar clear** - `5781aa9` (fix)

**Continuation tasks (from plan 01 — included here for completeness):**
- Plan 01 Task 1: Constants + resize + reposition — `84ce49e`
- Plan 01 Task 2: Dirty-flag guards — `2750572`

## Files Created/Modified

- `src/systems/HUD.js` - BAR_W 560->320, BAR_H 30->18, SHIELD_Y 160->80, HEALTH_Y 200->106, BOSS_BAR_Y 260->140, XP_BAR_Y 1760->1872, hudBg height 270->130, xpBotGrad height reduced to 28px

## Decisions Made

- **BAR_W 320 vs 560:** User explicitly said bars "covered too much of the top play area." 320px is 59% of the original width — wide enough to read, narrow enough to be a HUD element not a banner.
- **hudBg 130px height:** With SHIELD_Y=80 and HEALTH_Y=106, the bar cluster bottom edge is Y=115. A 120px solid + 10px fade covers the cluster without extending into the action zone.
- **xpBotGrad 28px:** XP_BAR_H=20 + 8px padding = 28px total. This is the minimum needed to give the bar a legible background. Previously ~70px (XP_BAR_H+50).
- **XP_BAR_Y 1872:** Game canvas is 1920px tall. With XP_BAR_H=20, center at Y=1872 places the bar bottom at Y=1882 — 38px from canvas bottom, visible without being cut off.

## Deviations from Plan

### Auto-fixed Issues

None — this plan's task was itself a fix pass in response to user visual review. The checkpoint identified the issues; this plan resolved them.

The changes made were all specified in the resume instructions and executed as directed.

---

**Total deviations:** 0
**Impact on plan:** N/A

## Issues Encountered

- Initial implementation in plan 01 used BAR_W=560 and XP_BAR_Y=1760 which were geometrically correct but visually too intrusive at actual mobile viewport size. The human visual review checkpoint caught this correctly — no automated test could have detected the UX impact.
- All three issues (bar size, top background height, bottom XP background height) were fixed atomically in a single commit.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Phase 01.1 is complete — all four ROADMAP success criteria confirmed met by user
- HUD.js constants are now validated at real mobile resolution; future modifications start from a known-good baseline
- Phase 2 (Ground Drop Icon System) is unblocked — depends on Phase 01.1 being complete

---
*Phase: 01.1-hud-layout-rethink*
*Completed: 2026-02-27*
