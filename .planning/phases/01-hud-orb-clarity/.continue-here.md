---
phase: 01-hud-orb-clarity
task: 0
total_tasks: 2
status: pre_planning
last_updated: 2026-02-26T11:03:13.768Z
---

<current_state>
GSD project initialization is COMPLETE. We are now at the start of Phase 1 with no plans created yet. The next step is `/gsd:plan-phase 1` in a fresh context window.
</current_state>

<completed_work>

## This Session (Full GSD Initialization)

### Codebase Mapping (complete)
- Spawned 4 parallel gsd-codebase-mapper agents
- STACK.md (157 lines), INTEGRATIONS.md (214 lines), ARCHITECTURE.md (293 lines), STRUCTURE.md (342 lines), CONVENTIONS.md (397 lines), TESTING.md (224 lines), CONCERNS.md (222 lines)
- All 7 docs committed to .planning/codebase/

### new-project (complete)
- PROJECT.md written and committed
- config.json updated (mode: yolo, depth: standard, balanced profile, all agents on, parallel)
- Research: 4 researcher agents spawned in parallel
  - STACK.md (402 lines) — Phaser 4 UX techniques, zero new deps needed
  - ARCHITECTURE.md (543 lines) — single-scene HUD correct, shared Graphics pattern correct
  - PITFALLS.md (264 lines) — per-frame Graphics.clear() degradation, ADD blend mode limit, visual noise
  - FEATURES.md (written manually after agent hit rate limit) — Survivor.io patterns, genre conventions
  - SUMMARY.md (synthesized) — 4-phase structure recommended, build order dependency analysis
- REQUIREMENTS.md written and committed (10 requirements: VISC-01/02/03, CMBT-01/02/03/04, POL-01/02/03)
- ROADMAP.md + STATE.md written and committed (4 phases, 8 plans)

## Previous Session (Playtest Fixes — all applied)
1. Boss checkerboard — THRESH 30→55 in PreloadScene
2. XP orbs — Rewritten as Graphics-drawn green circles (XPManager)
3. Shield default 3→1 (PlayerStats)
4. XP thresholds 50/90/140/200 (XPManager)
5. Enemy scales reduced ~20% (WaveManager)
6. Twin laser hit effects (TwinLaser.js)
7. Music volume 0.35→0.5, combat at wave 4 (ProceduralMusic)
8. Background zone transitions every 2-3 waves (ScrollingBackground)
9. Shield sounds: hit/break/recharge (AudioManager + GameScene)
10. Enemy fire rates slowed (waves.js)
</completed_work>

<remaining_work>

## Immediate Next: Plan Phase 1
Run `/gsd:plan-phase 1` to create PLAN.md files for:
- Plan 01-01: Switch XP orb color green→orange/gold across all rendering paths (orb glow layers, magnet trail, HUD accent)
- Plan 01-02: Remove bottom stat bar from GameScene/HUD; add dirty-flag guard and scaleX tween to HUD fill bars

## Phase 1 Success Criteria
1. XP orbs visible against all 6 background zones including nebula
2. Bottom stat bar (DMG/RATE/SPD/SH/HP/CRIT/PIER/STK) gone from live gameplay HUD
3. HUD shield and health bars animate smoothly (no jump-cut redraws)
4. Magnet trail color and HUD accent consistent with new orange orb

## Full Roadmap
- Phase 1: HUD + XP Orb Clarity (VISC-01, VISC-03) ← NEXT
- Phase 2: Ground Drop Icon System (VISC-02)
- Phase 3: Weapon Visual Feedback (CMBT-01–04, POL-03)
- Phase 4: Floating Text + Combat Polish (POL-01, POL-02)

## User's Original 5 Requests (to implement across phases)
1. Orange XP orbs [Phase 1]
2. Ground drop icons not text [Phase 2]
3. Bottom stat bar remove/relocate [Phase 1]
4. Twin laser visual feedback — health drain visible [Phase 3]
5. Survivor.io-quality UX [all phases]
</remaining_work>

<decisions_made>

- Survivor.io as explicit UX benchmark (user-requested)
- Orange/gold XP orbs — green blends with nebula backgrounds (confirmed active failure)
- Icons for all 6 drop types using generateTexture() at preload (not per-frame Graphics)
- Single-scene HUD correct — no separate UIScene (research confirmed)
- preFX.addGlow() for hit flash (not setTint — avoids conflicts with elite gold tint)
- FloatingText throttled to kill/crit events only (not every laser tick)
- CombatUtils.js killEnemy() extraction is Phase 3 prerequisite before any kill feedback work
- Phase 4 needs bitmap font pipeline spike before committing to BitmapText
- Per-frame Graphics.clear() hot paths must be fixed within the phase that touches each system
- ADD blend mode limit: max 1-2 active emitters simultaneously
</decisions_made>

<blockers>
- None technical
- Rate limit hit during research (features + pitfalls agents) — worked around by writing FEATURES.md manually
</blockers>

<context>
The game is a mobile portrait (1080x1920) horde-survival shooter in Phaser 3/4. User playtests on localhost:5181/?dev=1 and provides verbal feedback. The UX overhaul is driven by comparison to Survivor.io — user wants that level of polish.

Key research findings to keep in mind:
- All needed UX techniques are in Phaser 4 built-in APIs — zero new dependencies
- Per-frame Graphics.clear() is the #1 performance risk — fix dirty-flag before adding effects
- Green XP orbs blending with nebula backgrounds is an ACTIVE gameplay failure, not future polish
- Text labels on drops are confirmed unreadable at actual mobile resolution
- TwinLaser/bomb kills currently broken: don't trigger kill streak, drops, or XP (Phase 3 fixes this)

Key files for Phase 1 work:
- src/systems/XPManager.js — orb rendering (change green→orange, all 3 color references)
- src/ui/StatBar.js — bottom stat strip (remove from live HUD)
- src/systems/HUD.js — top HUD, shield/health bars (add dirty-flag + scaleX tween)
- src/scenes/GameScene.js — where StatBar is created/updated
</context>

<next_action>
Run `/gsd:plan-phase 1` in a FRESH context window (/clear first).
This creates PLAN.md files for the 2 plans in Phase 1.
</next_action>
